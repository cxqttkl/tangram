scene:
    animated: true
    background:
        color: '#ccc'

sources:
    mapzen:
        type: TopoJSON
        url: https://tile.mapzen.com/mapzen/vector/v1/all/{z}/{x}/{y}.topojson
        url_params:
            api_key: mapzen-T3tPjn7
        max_zoom: 16
    test:
        type: GeoJSON
        url: test4.json

styles:
    testline:
        base: lines
        texcoords: true
        blend: add

    uvlines:
        base: lines
        texcoords: true
        blend: overlay
        # shaders:
        #     blocks:
        #         color: |
        #             color.rgb = vec3(v_texcoord.x, fract(v_texcoord.y/2.), 0.);

layers:

    earth:
        data: { source: mapzen }
        draw:
            polygons:
                color: '#999'
                order: 4
            lines1:
                style: lines
                color: [.5, .5, .5]
                width: 3px
                order: 5
                join: round
            lines2:
                style: lines
                color: [.6, .6, .6]
                width: 5px
                order: 3
                join: round
                offset: -50
            lines3:
                style: lines
                color: [.7, .7, .7]
                width: 10px
                order: 2
                join: round
                offset: -100
            lines4:
                style: lines
                color: [.75, .75, .75]
                width: 20px
                order: 1
                join: round
                offset: -200

    test:
        data: { source: test, layer: _default }
        # filter: { not: { kind: rail } }
        draw:
            testline:
                color: [1, 0, 1, .3]
                width: 25px
                order: 2
                cap: round
                join: round
                offset: 300

    transit:
        data: { source: mapzen }
        filter: { kind: subway }
        draw:
            lines:
                color: [1, 1, 1, .3]
                width: 5px
                order: 1
                cap: round
                join: round
        F:
            filter: { ref: F }
            draw:
                lines:
                    order: 4
                    color: orange
                    offset: 5px
                    # offset: function(){return 50 * feature....;}
        G:
            filter: { ref: G }
            draw:
                lines:
                    order: 5
                    color: lime
                    offset: 5px
        E:
            filter: { ref: E }
            draw:
                lines:
                    order: 4
                    color: blue
                    offset: 0
        D:
            filter: { ref: D }
            draw:
                lines:
                    order: 4
                    color: orange
                    offset: 0px
        M:
            filter: { ref: M }
            draw:
                lines:
                    order: 4
                    color: orange
                    offset: -5px
        R:
            filter: { ref: R }
            draw:
                lines:
                    order: 4
                    color: yellow
                    offset: -10px
        N:
            filter: { ref: N }
            draw:
                lines:
                    order: 4
                    color: yellow
                    offset: -5px
        C:
            filter: { ref: C }
            draw:
                lines:
                    order: 4
                    color: blue
                    offset: 200
        seven:
            filter: { ref: '7' }
            draw:
                lines:
                    order: 4
                    color: purple
                    offset: 0
